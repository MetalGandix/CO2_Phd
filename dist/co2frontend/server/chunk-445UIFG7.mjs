import './polyfills.server.mjs';
import{a as I}from"./chunk-HABK2AS5.mjs";import{$a as r,Aa as p,Ea as s,Na as c,Nb as v,Ob as M,Pa as i,Pb as b,Qa as n,Qb as O,Ra as m,Wa as g,_a as f,ab as u,bb as C,fb as _,gb as x,hb as h,oc as y,sa as a,ta as l}from"./chunk-B4AJPWR3.mjs";import"./chunk-S6KH3LOX.mjs";function S(t,o){if(t&1&&(i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),_(5,"date"),n()()),t&2){let e=o.$implicit;a(2),C("",e.co2_amount," kg"),a(2),u(x(5,2,e.date,"short"))}}function E(t,o){if(t&1&&(i(0,"div")(1,"table",4)(2,"thead")(3,"tr")(4,"th"),r(5,"CO\u2082"),n(),i(6,"th"),r(7,"Data"),n()()(),i(8,"tbody"),s(9,S,6,5,"tr",5),n()()()),t&2){let e=g();a(9),c("ngForOf",e.co2Data)}}function k(t,o){t&1&&(i(0,"p"),r(1,"Nessun dato CO\u2082 trovato per il tuo account."),n())}function w(t,o){t&1&&(i(0,"div",6),m(1,"div",7),n())}var P=class t{constructor(o){this.co2Service=o}co2Data=[];userId=null;isLoading=!1;ngOnInit(){this.userId=sessionStorage.getItem("userId"),this.userId?this.fetchUserCo2Data(this.userId):(console.error("ID utente non trovato nel sessionStorage"),this.isLoading=!1)}fetchUserCo2Data(o){this.isLoading=!0,this.co2Service.getCo2ByUserId(o).subscribe({next:e=>{this.co2Data=e,this.isLoading=!1,console.log("Dati CO\u2082 per l'utente:",this.co2Data)},error:e=>{console.error("Errore durante il recupero dei dati CO\u2082:",e)}})}static \u0275fac=function(e){return new(e||t)(l(I))};static \u0275cmp=p({type:t,selectors:[["app-myco2"]],decls:7,vars:3,consts:[["noData",""],[1,"container"],[4,"ngIf","ngIfElse"],["class","spinner-container",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[1,"spinner-container"],[1,"spinner"]],template:function(e,d){if(e&1&&(i(0,"div",1)(1,"h1"),r(2,"Il Mio Consumo di CO\u2082"),n(),s(3,E,10,1,"div",2)(4,k,2,0,"ng-template",null,0,h)(6,w,2,0,"div",3),n()),e&2){let D=f(5);a(3),c("ngIf",d.co2Data.length>0)("ngIfElse",D),a(3),c("ngIf",d.isLoading)}},dependencies:[y,O,v,M,b],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid #fff;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{P as Myco2Component};
